# Асинхронный парсер Wikipedia

## Описание
Парсер осуществляет поиск кратчайшего пути перехода между 2 произвольными ссылками на страницы сайта https://ru.wikipedia.org/
На вход в парсер подаются данные о стартовой и конечной страницах, расположенных на сайте https://ru.wikipedia.org/.
```
Например:
Стартовая страница - https://ru.wikipedia.org/wiki/Xbox_360_S
Конечная страница - https://ru.wikipedia.org/wiki/Nintendo_3DS
```
На данный момент реализовано получение данных из json файла.

Необходимо найти путь, как, используя ссылки, указанные на страницах сайта,
осуществить переход от стартовой до конечной страницы, и указать предложения, в которых содержатся нужные ссылки:
```
1 ------------------------
Xbox 360 S (Slim) — игровая приставка седьмого поколения.
https://ru.wikipedia.org/wiki/Игровая_приставка

2 ------------------------
В 2011—2013 годах основные производители игровых приставок выпустили новые модели на смену устаревшим: Nintendo — домашнюю консоль Wii U (2012) и портативную 
Nintendo 3DS (2011), Sony — домашнюю PlayStation 4 (2013) и портативную PlayStation Vita (2011), Microsoft — домашнюю Xbox One (2013).
https://ru.wikipedia.org/wiki/Nintendo_3DS
```

## Алгоритм
Для поиска оптимального (самого короткого) пути был применен алгоритм поиска в ширину:
1. Сначала мы проверяем все ссылки стартовой страницы (назовем их ссылками 0 поколения).
2. Если среди них нет адреса финальной страницы, то начинаем асинхронный обход этих страниц с целью собрать список ссылок, которые содержатся на них (назовем их ссылками 1 поколения)
3. Если список ссылок 1 поколения не содержит адреса финальной страницы, то начинаем асинхронный обход этих ссылок и собираем ссылки с каждой из них (ссылки 2 поколения)
4. Проверяем ссылки 2 поколения на наличие нужной нам
и т.д. до тех пор, пока не найдем нужную.

При этом для каждой ссылки важно запоминать обратный путь для того, чтобы в результате работы можно было бы сформировать цепочку переходов от стартовой до итоговой страницы. Также для оптимизации алгоритма важно исключать уже проверенные ссылки. Общий список всех проверенных ссылок выводится в logs.txt после окончания работы скрипта.

Для ускорения работы парсера использован **asyncio**.


## Технологии
* Python 3.9
* Beautifulsoup4 4.12.2
* Asyncio


## Подготовка парсера к работе

1. Cклонируйте репозиторий на свой локальный компьютер
```
git clone https://github.com/MarinaChernykh/Wiki_Scraper.git
```

2. Создайте виртульное окружение и активируйте его, установите зависимости
```
python -m venv venv
. venv/Scripts/activate
pip install -r requirements.txt
```

3. В файле data.json укажите ссылки для начала и конца маршрута

4. Если вы запускаете программу на компьютере НЕ с ОС Windows, то в файле **main.py** необходимо закоментировать строку 174 и раскомментировать строку 173:
```
    # asyncio.DefaultEventLoopPolicy()        # для запуска на Linux и macOS
    asyncio.WindowsSelectorEventLoopPolicy()  # для запуска на Windows
```

5. Запустите парсер командой в консоли либо откройте файл **main.py** и запустите его кнопкой запуска в IDE. 
```
python main.py
```
После завершения работы парсера результат будет выведен в консоль.

## Автор
Марина Черных
